# Циклическое и ациклическое переключение языков

*Read this in: [RU](README_ru.md), [DE](README_de.md), [EN](README.md)*

## Проблема

Иногда требуется иметь несколько раскладок клавиатуры и быстро переключаться между ними. Обычно проще всего настроить циклическое переключение языков и этого вполне достаточно для повседневной жизни. Тем не менее иногда хочется иметь возможность точно задать нужный язык, в линукс это можно сделать различными способами. 

Проверено в Linux Mint.

## Инструкция

## Подготовка
Сначала посмотрим что у нас уже есть в системе. У всех будет разное, но примерно вот так:

```
setxkbmap -query
rules:      evdev
model:      pc105
layout:     de,us,ru
options:    terminate:ctrl_alt_bksp,grp:ctrl_shift_toggle

```

Здесь три раскладки клавиатуры, которые циклически переключаются по нажатию ctrl+shift (и ещё сочетание клавиш для прерывания текущего сеанса).

Чтобы задать эти опции нужно выполнить две команды (первая из них стирает старые опции):

```
setxkbmap -option; setxkbmap -layout de,us,ru -option terminate:ctrl_alt_bksp,grp:ctrl_shift_toggle

```

Теперь у нас есть всё для реализаци.

## Настройка

Идём в Keyboard -> Applications shortcuts, задаём для нужной комбинации клавиш выбор нужного языка командой:

```
sh -c "setxkbmap -option; setxkbmap -layout de,us,ru -option terminate:ctrl_alt_bksp,grp:ctrl_shift_toggle"

```
при этом ставим первым в списке тот язык, который нужен. Например для того, чтобы по ctrl+1 включалась us раскладка, команда будет выглядеть так:

```
sh -c "setxkbmap -option; setxkbmap -layout us,ru,de -option terminate:ctrl_alt_bksp,grp:ctrl_shift_toggle"

```

И тогда при каждом нажатии ctrl+1 будет происходить следующее: старые опции стираются, затем применяются новые и раскладка переключается на первый язык в списке.

## Итог

В результате можно легко и гибко назначать и менять настройки клавиатуры, в том числе отключать какой-то из языков и при этом сохранять возможность пользоваться обычным циклическим переключением

## Примечание

1. Настройки setxkbmap в этом случае не сохраняются, поэтому если эксперименты зашли слишком далеко - достаточно перезапустить сессию пользователя или целиком ОС.
2. В некоторых случаях, например при настройке "setxkbmap -layout de" перестают работать горячие клавиши (например ctrl+c), здесь поможет добавление раскладки us: "setxkbmap -layout de,us".





